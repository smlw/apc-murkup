var registerApp=new RegisterApp;function regApp(e){var t=$("#register-app_form").validate({errorContainer:".box-messages",errorClass:"text-danger",rules:{formDomainName:{required:!0}},messages:{formDomainName:{required:"Пожалуйста, введите ссылку на ресурс вида http://domainname.ru/",url:"Пожалуйста, введите корректный адрес"}}}),s="#formDomainName";this.checkDomainName=function(){var e=$(s).val();t.element(s)?(registerApp.setDomainName(e),$(".btn-contolls").find(".btn-next").addClass("d-block"),$(".result-message").append('<span class="text-success">OK</span>'),console.log(registerApp.getAppObject())):$(".btn-contolls").find(".btn-next").removeClass("d-block")},this.checkRights=function(){var e={url:registerApp.getAppObject().domainName,secretKey:registerApp.getAppObject().secretKey};console.log(e),$.ajax({type:"POST",data:JSON.stringify(e),contentType:"application/json",url:"/registerApp"}).done(function(e){(console.log(e),e.ok)?(console.log(!0),registerApp.getAppObject().checkRights&&(registerApp.setRights(),$(".result-message").append('<span class="text-success">OK</span>'))):(console.log(!1),console.log(e.error))})};var r=this;e.onclick=function(e){var t=e.target.getAttribute("data-action");t&&r[t]()}}new regApp(regAppForm);